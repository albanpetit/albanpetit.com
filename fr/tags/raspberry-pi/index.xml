<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Raspberry pi on Alban Petit</title><link>https://albanpetit.com/fr/tags/raspberry-pi/</link><description>Recent content in Raspberry pi on Alban Petit</description><generator>Hugo -- gohugo.io</generator><language>fr</language><lastBuildDate>Tue, 26 Dec 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://albanpetit.com/fr/tags/raspberry-pi/index.xml" rel="self" type="application/rss+xml"/><item><title>Configuration du Wifi sur un Raspberry</title><link>https://albanpetit.com/fr/posts/raspberry-wifi-config/</link><pubDate>Tue, 26 Dec 2023 00:00:00 +0000</pubDate><guid>https://albanpetit.com/fr/posts/raspberry-wifi-config/</guid><description>&lt;img src="https://albanpetit.com/fr/posts/raspberry-wifi-config/main.jpg" alt="Featured image of post Configuration du Wifi sur un Raspberry" />&lt;p>Dans plusieurs de mes projets du moment (professionnels et personnels), j’utilise des Raspberry, mais je passe mon temps à oublier comment effectuer la configuration wifi de ces derniers. Deux grandes options sont possibles : la configuration avant ou après le premier démarrage. C’est généralement une étape importante, surtout avec l’utilisation de &lt;strong>Raspbian Lite&lt;/strong>, qui ne dispose pas d’interface graphique et nécessite une connexion &lt;strong>SSH&lt;/strong> pour son utilisation.&lt;/p>
&lt;h2 id="raspberry-pi-imager">Raspberry Pi Imager&lt;/h2>
&lt;p>Cette partie concerne donc la configuration du &lt;strong>Wifi&lt;/strong> et du &lt;strong>SSH&lt;/strong> avant même le premier lancement du Raspberry. Grâce à la &lt;a class="link" href="https://www.raspberrypi.org" target="_blank" rel="noopener"
>Raspberry Pi Foundation&lt;/a>, il n’est même plus nécessaire d’avoir un clavier et un écran pour cela. Ils nous fournissent un utilitaire disponible sur toutes les plateformes, Windows, Apple et Linux, qui permet de produire des cartes SD fonctionnelles avec de multiples systèmes d’exploitation. En plus de graver pour nous les images des systèmes d’exploitation, cet utilitaire permet même la configuration des éléments les plus importants pour la mise en place d’un &lt;strong>Raspberry&lt;/strong>.&lt;/p>
&lt;p>&lt;img src="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspberry-pi-imager-1.png"
width="1064"
height="745"
srcset="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspberry-pi-imager-1_hu545a8556e294b95fc5055bc87c5bbd7c_117478_480x0_resize_box_3.png 480w, https://albanpetit.com/fr/posts/raspberry-wifi-config/raspberry-pi-imager-1_hu545a8556e294b95fc5055bc87c5bbd7c_117478_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Raspberry Pi Imager"
class="gallery-image"
data-flex-grow="142"
data-flex-basis="342px"
>&lt;/p>
&lt;p>Cet utilitaire est disponible en téléchargement directement sur la page des logiciels du site &lt;strong>Raspberry&lt;/strong> : &lt;a class="link" href="https://www.raspberrypi.com/software/" target="_blank" rel="noopener"
>Raspberry Software&lt;/a>. Il suffit de sélectionner le système d’exploitation que vous voulez utiliser et votre périphérique de stockage (carte SD ou USB), puis d’appuyer sur &lt;strong>WRITE&lt;/strong> pour lancer l’écriture de l’image sur le périphérique.&lt;/p>
&lt;h3 id="options-avancées">Options avancées&lt;/h3>
&lt;p>En bas à droite de l’interface, un bouton en forme d’engrenage permet d’accéder aux fonctions avancées de cet utilitaire, au sein de ces fonctions nous pouvons configurer le &lt;strong>SSH&lt;/strong>, le nom du &lt;strong>Raspberry&lt;/strong> sur le réseau mais aussi les informations nécessaires pour qu’il puisse se connecter sur le réseau &lt;strong>Wifi&lt;/strong> :&lt;/p>
&lt;p>&lt;img src="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspberry-pi-imager-2.png"
width="1108"
height="789"
srcset="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspberry-pi-imager-2_hu1f8e2986170e4e6fc14d485f8cad55b6_165189_480x0_resize_box_3.png 480w, https://albanpetit.com/fr/posts/raspberry-wifi-config/raspberry-pi-imager-2_hu1f8e2986170e4e6fc14d485f8cad55b6_165189_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Raspberry Pi Imager options avancées"
class="gallery-image"
data-flex-grow="140"
data-flex-basis="337px"
>&lt;/p>
&lt;p>Il s&amp;rsquo;agira de remplir : le &lt;strong>SSID&lt;/strong>, le mot de passe du réseau, et la localisation du routeur émettant le Wifi. Lors de son premier démarrage et pour tous les suivants le &lt;strong>Raspberry&lt;/strong> qui accueille cette carte SD pourra donc se connecter au Wifi via les informations saisies durant la gravure de cette image.&lt;/p>
&lt;blockquote>
&lt;p>Le &lt;strong>SSID&lt;/strong>, sigle de l&amp;rsquo;anglais : &lt;em>service set identifier&lt;/em> (« identifiant défini de service »), est le nom d&amp;rsquo;un réseau sans fil selon la norme IEEE 802.11. Ce nom est constitué par une chaîne de caractères de 0 à 32 octets.&lt;/p>
&lt;/blockquote>
&lt;h2 id="configuration-en-ligne-de-commande">Configuration en ligne de commande&lt;/h2>
&lt;p>L&amp;rsquo;application &lt;strong>Raspberry pi imager&lt;/strong> permet de configurer le wifi avant même le premier démarrage du Raspberry, mais parfois cette configuration doit être faite après le démarrage, dans ce cas là plusieurs possibilités s&amp;rsquo;offrent à nous, une configuration entièrement manuelle en ligne de commande ou alors l&amp;rsquo;utilitaire : &lt;strong>Raspi-config&lt;/strong>.&lt;/p>
&lt;h3 id="configuration-manuelle">Configuration manuelle&lt;/h3>
&lt;p>Il est d&amp;rsquo;abord nécessaire de configurer les interfaces réseaux, pour cela, l’utilitaire d’édition de fichier texte par défaut de &lt;strong>Raspbian&lt;/strong>, &lt;strong>nano&lt;/strong> nous aidera :&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo nano /etc/network/interfaces
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Ce fichier liste toutes les interfaces réseaux existantes, il ne sera donc probablement pas vide. Il faut ajouter une ligne en haut du fichier :&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">auto wlan0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Ensuite, il faut permettre au &lt;strong>Raspberry&lt;/strong> d&amp;rsquo;utiliser le Wifi comme méthode de connexion à internet et d&amp;rsquo;utiliser le fichier de configuration &lt;code>/etc/wpa_supplicant/wpa_supplicant.conf&lt;/code>. Il faut alors également ajouter à la toute fin du même fichier les lignes de configuration suivantes :&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">allow-hotplug wlan0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface wlan0 inet dhcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface default inet dhcp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Il faut ensuite enregistrer les modifications, puis quitter &lt;strong>nano&lt;/strong> avec les raccourcis suivants : &lt;code>ctrl+x&lt;/code>, &lt;code>ctrl+y&lt;/code>.&lt;/p>
&lt;p>La suite de la configuration aura lieu dans le fichier &lt;code>/etc/wpa_supplicant/wpa_supplicant.conf&lt;/code> :&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo nano /etc/wpa_supplicant/wpa_supplicant.conf
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Ce fichier n&amp;rsquo;est encore une fois probablement pas vide, il faut ajouter les lignes de configurations suivantes à la fin du fichier (en changeant bien sûr &lt;strong>LE_NOM_DU_RESEAU&lt;/strong> et &lt;strong>LE_MOT_DE_PASSE&lt;/strong>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">country&lt;/span>&lt;span class="o">=&lt;/span>FR
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">ctrl_interface&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="nv">DIR&lt;/span>&lt;span class="o">=&lt;/span>/var/run/wpa_supplicant &lt;span class="nv">GROUP&lt;/span>&lt;span class="o">=&lt;/span>netdev
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">update_config&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="m">1&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">network&lt;/span>&lt;span class="o">={&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">ssid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;LE_NOM_DU_RESEAU&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nv">psk&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s2">&amp;#34;LE_MOT_DE_PASSE&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="o">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>De la même façon, il faut enregistrer le fichier et quitter &lt;strong>nano&lt;/strong> avec les raccourcis : &lt;code>ctrl+x&lt;/code>, &lt;code>ctrl+y&lt;/code>.&lt;/p>
&lt;p>Suite à cela, la configuration est normalement fonctionnelle. Un redémarrage permet de le vérifier :&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Pour vérifier la connexion après un redémarrage, un simple &lt;code>ping&lt;/code> fera l&amp;rsquo;affaire :&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">ping google.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Voici le genre de réponse attendue :&lt;/p>
&lt;p>&lt;img src="https://albanpetit.com/fr/posts/raspberry-wifi-config/ping-google.png"
width="885"
height="497"
srcset="https://albanpetit.com/fr/posts/raspberry-wifi-config/ping-google_hucf2992d6ed901688f7848058661adc99_105795_480x0_resize_box_3.png 480w, https://albanpetit.com/fr/posts/raspberry-wifi-config/ping-google_hucf2992d6ed901688f7848058661adc99_105795_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="Ping google"
class="gallery-image"
data-flex-grow="178"
data-flex-basis="427px"
>&lt;/p>
&lt;h3 id="raspi-config">Raspi-config&lt;/h3>
&lt;p>La fondation Raspberry met également à disposition un outil pour faciliter ce type de configuration, bien qu&amp;rsquo;il soit moins complet qu&amp;rsquo;une configuration manuelle, il est en contrepartie bien plus simple à prendre en main : &lt;strong>Raspi-config&lt;/strong>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo raspi-config
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Voici l&amp;rsquo;interface qui s&amp;rsquo;ouvre à nous, elle permet la configuration de beaucoup de choses, mais ce qui concerne le Wifi est disponible dans: &lt;strong>System Options&lt;/strong>, ensuite: &lt;strong>Wireless Lan :&lt;/strong>&lt;/p>
&lt;p>&lt;img src="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-1.png"
width="857"
height="595"
srcset="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-1_hue8092d57cbe9c66a5d98b79fcbc0dc82_107090_480x0_resize_box_3.png 480w, https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-1_hue8092d57cbe9c66a5d98b79fcbc0dc82_107090_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="raspi-config menu 1"
class="gallery-image"
data-flex-grow="144"
data-flex-basis="345px"
>
&lt;img src="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-2.png"
width="857"
height="595"
srcset="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-2_hu92d5ea2143a29ed4d9c784913081d7f6_104135_480x0_resize_box_3.png 480w, https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-2_hu92d5ea2143a29ed4d9c784913081d7f6_104135_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="raspi-config menu 2"
class="gallery-image"
data-flex-grow="144"
data-flex-basis="345px"
>&lt;/p>
&lt;p>Raspi-config demande de configurer le pays dans lequel le raspberry sera utilisé :&lt;/p>
&lt;p>&lt;img src="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-3.png"
width="857"
height="595"
srcset="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-3_hu6b085c53bed49fdb5ee7a50289ab841a_95184_480x0_resize_box_3.png 480w, https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-3_hu6b085c53bed49fdb5ee7a50289ab841a_95184_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="raspi-config menu 3"
class="gallery-image"
data-flex-grow="144"
data-flex-basis="345px"
>
&lt;img src="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-4.png"
width="857"
height="595"
srcset="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-4_huda5f0479c87521d8b6bb9f946e532812_77876_480x0_resize_box_3.png 480w, https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-4_huda5f0479c87521d8b6bb9f946e532812_77876_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="raspi-config menu 4"
class="gallery-image"
data-flex-grow="144"
data-flex-basis="345px"
>&lt;/p>
&lt;p>L&amp;rsquo;utilitaire demandera ensuite le &lt;strong>SSID&lt;/strong> et le &lt;strong>mot de passe&lt;/strong> du réseau.&lt;/p>
&lt;p>&lt;img src="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-5.png"
width="857"
height="595"
srcset="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-5_hu0b57c46fdd66cdfc75b55814abc5951e_78520_480x0_resize_box_3.png 480w, https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-5_hu0b57c46fdd66cdfc75b55814abc5951e_78520_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="raspi-config SSID"
class="gallery-image"
data-flex-grow="144"
data-flex-basis="345px"
>
&lt;img src="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-6.png"
width="857"
height="595"
srcset="https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-6_hu4a114d96bf514baeb558cd5062d7227a_79547_480x0_resize_box_3.png 480w, https://albanpetit.com/fr/posts/raspberry-wifi-config/raspi-config-6_hu4a114d96bf514baeb558cd5062d7227a_79547_1024x0_resize_box_3.png 1024w"
loading="lazy"
alt="raspi-config mot de passe"
class="gallery-image"
data-flex-grow="144"
data-flex-basis="345px"
>&lt;/p>
&lt;p>Il suffit maintenant de quitter l&amp;rsquo;outil pour appliquer la configuration. Le Raspberry se connectera automatiquement à chaque redémarrage.&lt;/p>
&lt;h3 id="une-ip-statique-">Une IP statique ?&lt;/h3>
&lt;p>L&amp;rsquo;objectif de ce genre de configuration est généralement d&amp;rsquo;utiliser le &lt;strong>Raspberry&lt;/strong> sans clavier, ni souris : avec une connexion &lt;strong>SSH&lt;/strong>. Il est donc intéressant de s&amp;rsquo;assurer que ce dernier ne va pas changer d&amp;rsquo;adresse &lt;strong>IP&lt;/strong>.&lt;/p>
&lt;p>La configuration de l&amp;rsquo;interface a encore lieu dans &lt;strong>/etc/network/interfaces&lt;/strong>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo nano /etc/network/interfaces
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Il faut y changer la ligne &lt;code>iface wlan0 inet dhcp&lt;/code> en &lt;code>iface wlan0 inet static&lt;/code>, cela va permettre de faire evoluer l&amp;rsquo;interface &lt;code>wlan0&lt;/code> de DHCP à static.
Dans ce même fichier il faut ajouter les lignes de configuration suivantes juste avant &lt;code>wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">address 192.168.1.155 &lt;span class="c1"># IP statique souhaitée&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netmask 255.255.255.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gateway 192.168.1.1 &lt;span class="c1"># IP du routeur&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Le fichier &lt;code>/etc/network/interfaces&lt;/code> doit normalement ressembler à cela après toutes les configurations:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">auto wlan0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface lo inet loopback
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface eth0 inet dhcp
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">allow-hotplug wlan0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface wlan0 inet static
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">address 192.168.1.155
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">netmask 255.255.255.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">gateway 192.168.1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wpa-conf /etc/wpa_supplicant/wpa_supplicant.conf
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">iface default inet dhcp
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Un redémarrage du Raspberry permet de vérifier le bon fonctionnement de la configuration :&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-bash" data-lang="bash">&lt;span class="line">&lt;span class="cl">sudo reboot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item></channel></rss>